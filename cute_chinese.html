<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è„‘æ´è¯­æ–‡å¤§å¸ˆ - äºŒå¹´çº§ä¸‹å†Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+KuaiLe&display=swap');
        
        body {
            font-family: 'Ma Shan Zheng', cursive;
            background-color: #FFF5E6;
            color: #5C3A21;
        }
        
        .game-container {
            background: url('https://img.freepik.com/free-vector/hand-painted-watercolor-pastel-sky-background_23-2148902771.jpg') no-repeat center center;
            background-size: cover;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .question-box {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border: 3px solid #FF9F43;
        }
        
        .option {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .option:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .correct {
            background-color: #6BCB77 !important;
            color: white !important;
            animation: bounce 0.5s;
        }
        
        .wrong {
            background-color: #FF6B6B !important;
            color: white !important;
            animation: shake 0.5s;
        }
        
        .title {
            font-family: 'ZCOOL KuaiLe', cursive;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .progress-bar {
            height: 10px;
            border-radius: 5px;
            background-color: #E0E0E0;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 5px;
            background: linear-gradient(90deg, #FF9F43, #FF6B6B);
            transition: width 0.5s ease;
        }
        
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 100;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall 5s linear infinite;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .avatar:hover {
            transform: scale(1.1);
        }
        
        .badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 5px;
            background-color: #FF9F43;
            color: white;
        }
        
        .streak {
            position: relative;
            display: inline-flex;
            align-items: center;
            margin-left: 10px;
        }
        
        .streak-fire {
            color: #FF6B6B;
            margin-right: 3px;
            animation: flame 1s infinite alternate;
        }
        
        @keyframes flame {
            from { transform: scale(1); }
            to { transform: scale(1.2); }
        }
        
        .powerup {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .level-up {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 200;
            text-align: center;
            animation: zoomIn 0.5s;
        }
        
        @keyframes zoomIn {
            from { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .daily-reward {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 300;
        }
        
        .reward-box {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            max-width: 300px;
        }
        
        .reward-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin: 15px 0;
        }
        
        .reward-day {
            padding: 5px;
            border-radius: 5px;
            background-color: #f0f0f0;
        }
        
        .reward-day.active {
            background-color: #FF9F43;
            color: white;
        }
        
        .reward-day.today {
            border: 2px solid #6BCB77;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="game-container w-full max-w-md p-6 relative overflow-hidden">
        <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center">
                <img id="avatar" src="https://img.icons8.com/color/96/000000/cute-monster.png" class="avatar mr-2" alt="å°æ€ªå…½">
                <div>
                    <h1 class="title text-xl font-bold text-purple-600">è„‘æ´è¯­æ–‡å¤§å¸ˆ</h1>
                    <div class="flex items-center">
                        <span id="level" class="text-sm">ç­‰çº§: 1</span>
                        <span id="xp" class="text-sm ml-2">ç»éªŒ: 0/100</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center">
                <div class="streak" id="streak-container" style="display: none;">
                    <i class="fas fa-fire streak-fire"></i>
                    <span id="streak-count">0</span>
                </div>
                <div class="ml-4 flex items-center">
                    <i class="fas fa-coins text-yellow-500 mr-1"></i>
                    <span id="coins" class="font-bold">100</span>
                </div>
            </div>
        </div>
        
        <!-- è¿›åº¦æ¡ -->
        <div class="progress-bar w-full mb-6">
            <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
        </div>
        
        <!-- é—®é¢˜åŒºåŸŸ -->
        <div id="question-container" class="question-box p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <span id="question-number" class="text-sm font-bold">é—®é¢˜ 1/10</span>
                <span id="timer" class="text-sm font-bold">â±ï¸ 30ç§’</span>
            </div>
            <h2 id="question" class="text-xl font-bold mb-4 text-center">åŠ è½½ä¸­...</h2>
            <div id="options" class="grid grid-cols-2 gap-4">
                <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="flex justify-between items-center mt-4">
                <button id="hint-btn" class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full flex items-center">
                    <i class="fas fa-lightbulb mr-2"></i> æç¤º
                </button>
                <button id="skip-btn" class="bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full flex items-center">
                    <i class="fas fa-forward mr-2"></i> è·³è¿‡
                </button>
            </div>
            <div id="hint-text" class="hidden mt-2 text-sm text-gray-600"></div>
        </div>
        
        <!-- èƒ½é‡é“å…· -->
        <div class="flex justify-around mb-4">
            <button id="double-xp" class="powerup bg-green-100 text-green-800 px-3 py-1 rounded-full flex items-center text-sm" title="åŒå€ç»éªŒ(30ç§’)">
                <i class="fas fa-bolt mr-1"></i> åŒå€ç»éªŒ
                <span id="double-xp-count" class="badge">1</span>
            </button>
            <button id="freeze-timer" class="powerup bg-blue-100 text-blue-800 px-3 py-1 rounded-full flex items-center text-sm" title="å†»ç»“æ—¶é—´(10ç§’)">
                <i class="fas fa-snowflake mr-1"></i> å†»ç»“æ—¶é—´
                <span id="freeze-timer-count" class="badge">1</span>
            </button>
            <button id="remove-wrong" class="powerup bg-red-100 text-red-800 px-3 py-1 rounded-full flex items-center text-sm" title="ç§»é™¤é”™è¯¯ç­”æ¡ˆ">
                <i class="fas fa-eraser mr-1"></i> ç§»é™¤é”™è¯¯
                <span id="remove-wrong-count" class="badge">1</span>
            </button>
        </div>
        
        <!-- åº•éƒ¨å¯¼èˆª -->
        <div class="flex justify-around bg-yellow-100 bg-opacity-50 rounded-lg p-2" >
            <span>Ivyï¼ŒåŠ æ²¹ï¼ï¼ï¼</span>
        </div>
        
        <!-- è£…é¥°å…ƒç´  -->
        <div class="absolute -top-4 -right-4 w-24 h-24 bg-yellow-200 rounded-full opacity-20"></div>
        <div class="absolute -bottom-4 -left-4 w-32 h-32 bg-blue-200 rounded-full opacity-20"></div>
    </div>
    
    <!-- æç¤ºæ¨¡æ€æ¡† -->
    <div id="hint-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg max-w-sm w-full mx-4">
            <h3 class="text-xl font-bold mb-4 text-purple-600">æç¤º</h3>
            <p id="hint-text" class="mb-4">æç¤ºå†…å®¹åŠ è½½ä¸­...</p>
            <div class="flex justify-end">
                <button id="close-hint" class="bg-purple-600 text-white px-4 py-2 rounded">çŸ¥é“äº†</button>
            </div>
        </div>
    </div>
    
    <!-- ç»“æœæ¨¡æ€æ¡† -->
    <div id="result-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg max-w-sm w-full mx-4 text-center">
            <i id="result-icon" class="fas fa-check-circle text-5xl mb-4 text-green-500"></i>
            <h3 id="result-title" class="text-xl font-bold mb-2">å›ç­”æ­£ç¡®!</h3>
            <div class="flex justify-center items-center mb-2">
                <span class="mr-2">è·å¾—:</span>
                <i class="fas fa-coins text-yellow-500 mr-1"></i>
                <span id="coins-earned" class="font-bold mr-3">20</span>
                <i class="fas fa-star text-yellow-400 mr-1"></i>
                <span id="xp-earned" class="font-bold">10</span>
            </div>
            <p id="result-text" class="mb-4">ä½ å¤ªæ£’äº†!</p>
            <button id="next-question" class="bg-purple-600 text-white px-6 py-2 rounded-full">ä¸‹ä¸€é¢˜</button>
        </div>
    </div>
    
    <!-- åº†ç¥åŠ¨ç”»å®¹å™¨ -->
    <div id="celebration-container" class="celebration hidden"></div>
    
    <!-- å‡çº§æç¤º -->
    <div id="level-up" class="level-up hidden">
        <i class="fas fa-trophy text-5xl text-yellow-500 mb-2"></i>
        <h3 class="text-xl font-bold mb-1">å‡çº§å•¦!</h3>
        <p id="new-level" class="mb-2">ä½ ç°åœ¨æ˜¯ç­‰çº§ 2!</p>
        <p class="text-sm text-gray-600">è·å¾—æ–°å¤´åƒå’Œå¥–åŠ±!</p>
        <button id="close-level-up" class="bg-purple-600 text-white px-4 py-1 rounded-full mt-2">ç»§ç»­</button>
    </div>
    
    <!-- æ¯æ—¥å¥–åŠ± -->
    <div id="daily-reward" class="daily-reward hidden">
        <div class="reward-box">
            <h3 class="text-xl font-bold mb-2">æ¯æ—¥å¥–åŠ±</h3>
            <p class="mb-2">è¿ç»­ç™»å½•å¯è·å¾—æ›´å¤šå¥–åŠ±!</p>
            
            <div class="reward-calendar">
                <div class="reward-day">æ—¥</div>
                <div class="reward-day">ä¸€</div>
                <div class="reward-day">äºŒ</div>
                <div class="reward-day">ä¸‰</div>
                <div class="reward-day">å››</div>
                <div class="reward-day">äº”</div>
                <div class="reward-day">å…­</div>
                
                <div class="reward-day">10</div>
                <div class="reward-day active">20</div>
                <div class="reward-day active">30</div>
                <div class="reward-day active">50</div>
                <div class="reward-day today">100</div>
                <div class="reward-day">150</div>
                <div class="reward-day">200</div>
            </div>
            
            <p class="my-3">ä»Šæ—¥å¥–åŠ±: <span class="font-bold text-yellow-500">100 é‡‘å¸</span></p>
            <button id="claim-reward" class="bg-purple-600 text-white px-6 py-2 rounded-full">é¢†å–å¥–åŠ±</button>
        </div>
    </div>
    
    <script>
        // äºŒå¹´çº§ä¸‹å†Œè¯­æ–‡è¯¾æ–‡é¢˜ç›®
        const questions = [
            {
                question: "ã€Šæ‰¾æ˜¥å¤©ã€‹ä¸€æ–‡ä¸­ï¼Œå­©å­ä»¬åœ¨å“ªé‡Œæ‰¾åˆ°äº†æ˜¥å¤©ï¼Ÿ",
                options: [
                    "åœ¨ç”°é‡é‡Œ",
                    "åœ¨å°æºªè¾¹",
                    "åœ¨å…¬å›­é‡Œ",
                    "åœ¨ä»¥ä¸Šæ‰€æœ‰åœ°æ–¹"
                ],
                correct: 3,
                hint: "è¯¾æ–‡ä¸­æåˆ°å­©å­ä»¬åœ¨ç”°é‡ã€å°æºªã€å…¬å›­ç­‰åœ°æ–¹éƒ½å‘ç°äº†æ˜¥å¤©çš„è¿¹è±¡ã€‚"
            },
            {
                question: "ã€Šé›·é”‹å”å”ï¼Œä½ åœ¨å“ªé‡Œã€‹ä¸€æ–‡ä¸­ï¼Œé›·é”‹å”å”å¸®åŠ©äº†è°ï¼Ÿ",
                options: [
                    "è¿·è·¯çš„å­©å­",
                    "å¹´è¿ˆçš„å¤§å¨˜",
                    "å—ä¼¤çš„æˆ˜å£«",
                    "ä»¥ä¸Šéƒ½æ˜¯"
                ],
                correct: 3,
                hint: "è¯¾æ–‡ä¸­æè¿°äº†é›·é”‹å”å”å¸®åŠ©è¿·è·¯çš„å­©å­ã€å¹´è¿ˆçš„å¤§å¨˜ç­‰å¤šç§å¥½äººå¥½äº‹ã€‚"
            },
            {
                question: "ã€Šé‚“å°å¹³çˆ·çˆ·æ¤æ ‘ã€‹ä¸€æ–‡ä¸­ï¼Œé‚“å°å¹³çˆ·çˆ·åœ¨å“ªé‡Œæ¤æ ‘ï¼Ÿ",
                options: [
                    "å¤©å›å…¬å›­",
                    "é¢å’Œå›­",
                    "é¦™å±±å…¬å›­",
                    "åŒ—æµ·å…¬å›­"
                ],
                correct: 0,
                hint: "è¯¾æ–‡ä¸­æ˜ç¡®æåˆ°é‚“å°å¹³çˆ·çˆ·åœ¨å¤©å›å…¬å›­æ¤æ ‘ã€‚"
            },
            {
                question: "ã€Šå°èŒèšªæ‰¾å¦ˆå¦ˆã€‹ä¸€æ–‡ä¸­ï¼Œå°èŒèšªæœ€ååœ¨å“ªé‡Œæ‰¾åˆ°äº†å¦ˆå¦ˆï¼Ÿ",
                options: [
                    "æ± å¡˜é‡Œ",
                    "ç¨»ç”°é‡Œ",
                    "å°æºªé‡Œ",
                    "æ°´æ²Ÿé‡Œ"
                ],
                correct: 0,
                hint: "å°èŒèšªæœ€ç»ˆåœ¨æ± å¡˜é‡Œæ‰¾åˆ°äº†é’è›™å¦ˆå¦ˆã€‚"
            },
            {
                question: "ã€Šæˆ‘æ˜¯ä¸€åªå°è™«å­ã€‹ä¸€æ–‡ä¸­ï¼Œå°è™«å­è§‰å¾—å½“ä¸€åªå°è™«å­æ€ä¹ˆæ ·ï¼Ÿ",
                options: [
                    "å¾ˆç³Ÿç³•",
                    "è¿˜ä¸é”™",
                    "éå¸¸å±é™©",
                    "ç‰¹åˆ«æ— èŠ"
                ],
                correct: 1,
                hint: "è™½ç„¶å½“å°è™«å­æœ‰ä¸€äº›ä¸ä¾¿ï¼Œä½†ä½œè€…è§‰å¾—å½“ä¸€åªå°è™«å­è¿˜ä¸é”™ã€‚"
            },
            {
                question: "ã€Šæ«æ ‘ä¸Šçš„å–œé¹Šã€‹ä¸€æ–‡ä¸­ï¼Œå–œé¹Šé˜¿å§¨æ•™å°å–œé¹Šä»€ä¹ˆï¼Ÿ",
                options: [
                    "å”±æ­Œ",
                    "é£ç¿”",
                    "æ‰è™«",
                    "ç­‘å·¢"
                ],
                correct: 0,
                hint: "è¯¾æ–‡ä¸­æåˆ°å–œé¹Šé˜¿å§¨åœ¨æ•™å°å–œé¹Šå”±æ­Œã€‚"
            },
            {
                question: "ã€Šæ²™æ»©ä¸Šçš„ç«¥è¯ã€‹ä¸€æ–‡ä¸­ï¼Œå­©å­ä»¬åœ¨æ²™æ»©ä¸Šç©ä»€ä¹ˆæ¸¸æˆï¼Ÿ",
                options: [
                    "å †æ²™å ¡",
                    "æŒ–å®è—",
                    "æ‰“ä»—æ¸¸æˆ",
                    "æ‰è¿·è—"
                ],
                correct: 2,
                hint: "å­©å­ä»¬åœ¨æ²™æ»©ä¸Šç©æ‰“ä»—çš„æ¸¸æˆï¼Œç”¨æ²™å­å †åŸå ¡ã€æŒ–åœ°é“ã€‚"
            },
            {
                question: "ã€Šå°é©¬è¿‡æ²³ã€‹ä¸€æ–‡ä¸­ï¼Œå°é©¬æœ€åæ˜¯æ€ä¹ˆè¿‡æ²³çš„ï¼Ÿ",
                options: [
                    "ç›´æ¥è¶Ÿè¿‡å»",
                    "ç»•é“è€Œè¡Œ",
                    "ç­‰æ°´é€€äº†å†è¿‡",
                    "æ‰¾åˆ«çš„åŠ¨ç‰©å¸®å¿™"
                ],
                correct: 0,
                hint: "å°é©¬æœ€åå†³å®šè‡ªå·±è¯•ä¸€è¯•ï¼Œå‘ç°æ²³æ°´æ—¢ä¸åƒè€ç‰›è¯´çš„é‚£ä¹ˆæµ…ï¼Œä¹Ÿä¸åƒæ¾é¼ è¯´çš„é‚£ä¹ˆæ·±ã€‚"
            },
            {
                question: "ã€Šç”»æ¨æ¡ƒã€‹ä¸€æ–‡ä¸­ï¼Œè€å¸ˆä¸ºä»€ä¹ˆè®©åŒå­¦ä»¬ååˆ°'æˆ‘'çš„ä½ç½®ä¸Šçœ‹æ¨æ¡ƒï¼Ÿ",
                options: [
                    "å› ä¸º'æˆ‘'ç”»å¾—æœ€å¥½",
                    "å› ä¸ºè§’åº¦ä¸åŒçœ‹åˆ°çš„å½¢çŠ¶ä¸åŒ",
                    "å› ä¸º'æˆ‘'çš„ä½ç½®æœ€èˆ’æœ",
                    "å› ä¸ºè€å¸ˆæƒ³æƒ©ç½šå…¶ä»–åŒå­¦"
                ],
                correct: 1,
                hint: "è€å¸ˆæƒ³è®©åŒå­¦ä»¬æ˜ç™½ï¼Œä»ä¸åŒè§’åº¦çœ‹äº‹ç‰©ï¼Œå½¢çŠ¶ä¼šä¸ä¸€æ ·ã€‚"
            },
            {
                question: "ã€Šè¦æ˜¯ä½ åœ¨é‡å¤–è¿·äº†è·¯ã€‹ä¸€æ–‡ä¸­ï¼Œå“ªç§æ–¹æ³•ä¸èƒ½å¸®åŠ©è¾¨åˆ«æ–¹å‘ï¼Ÿ",
                options: [
                    "çœ‹å¤ªé˜³",
                    "çœ‹å¤§æ ‘",
                    "çœ‹ç§¯é›ª",
                    "çœ‹åŒ—ææ˜Ÿ"
                ],
                correct: 1,
                hint: "è¯¾æ–‡ä¸­æåˆ°äº†å¤ªé˜³ã€ç§¯é›ªã€åŒ—ææ˜Ÿå¯ä»¥å¸®åŠ©è¾¨åˆ«æ–¹å‘ï¼Œä½†æ²¡æœ‰æåˆ°å¤§æ ‘ã€‚"
            },
            {
                question: "ã€Šæ‰¾æ˜¥å¤©ã€‹ä¸€æ–‡ä¸­ï¼Œå­©å­ä»¬åœ¨ç”°é‡é‡Œå‘ç°äº†ä»€ä¹ˆæ˜¥å¤©çš„è¿¹è±¡ï¼Ÿ",
                options: [
                    " snow",
                    "æ–°é•¿å‡ºçš„è‰",
                    "è½å¶",
                    "æ¯è‰"
                ],
                correct: 1,
                hint: "å­©å­ä»¬åœ¨ç”°é‡é‡Œå‘ç°äº†æ–°é•¿å‡ºçš„è‰ï¼Œè¿™æ˜¯æ˜¥å¤©çš„è¿¹è±¡ã€‚"
            },
            {
                question: "ã€Šé›·é”‹å”å”ï¼Œä½ åœ¨å“ªé‡Œã€‹ä¸€æ–‡ä¸­ï¼Œé›·é”‹å”å”å¸®åŠ©è¿·è·¯çš„å­©å­æ—¶åšäº†ä»€ä¹ˆï¼Ÿ",
                options: [
                    "ç»™é’±",
                    "é€å›å®¶",
                    "é€é£Ÿç‰©",
                    "è®²æ•…äº‹"
                ],
                correct: 1,
                hint: "é›·é”‹å”å”ä¸»åŠ¨é€è¿·è·¯çš„å­©å­å›å®¶ã€‚"
            },
            {
                question: "ã€Šé‚“å°å¹³çˆ·çˆ·æ¤æ ‘ã€‹ä¸€æ–‡ä¸­ï¼Œé‚“å°å¹³çˆ·çˆ·ä¸ºä»€ä¹ˆè¦æ¤æ ‘ï¼Ÿ",
                options: [
                    "ä¸ºäº†å¥½çœ‹",
                    "ä¸ºäº†ç¯ä¿",
                    "ä¸ºäº†çºªå¿µ",
                    "ä¸ºäº†é®é˜³"
                ],
                correct: 1,
                hint: "é‚“å°å¹³çˆ·çˆ·æ¤æ ‘æ˜¯ä¸ºäº†ä¿æŠ¤ç¯å¢ƒã€‚"
            },
            {
                question: "ã€Šå°èŒèšªæ‰¾å¦ˆå¦ˆã€‹ä¸€æ–‡ä¸­ï¼Œå°èŒèšªæœ€åå˜æˆäº†ä»€ä¹ˆï¼Ÿ",
                options: [
                    "é’è›™",
                    "é±¼",
                    "ä¹Œé¾Ÿ",
                    "é¸­å­"
                ],
                correct: 0,
                hint: "å°èŒèšªæœ€åå˜æˆäº†é’è›™ã€‚"
            },
            {
                question: "ã€Šæˆ‘æ˜¯ä¸€åªå°è™«å­ã€‹ä¸€æ–‡ä¸­ï¼Œå°è™«å­æœ€å®³æ€•ä»€ä¹ˆï¼Ÿ",
                options: [
                    "ä¸‹é›¨",
                    "åˆ®é£",
                    "æ‰“é›·",
                    "ä¸‹é›ª"
                ],
                correct: 0,
                hint: "å°è™«å­æœ€å®³æ€•ä¸‹é›¨ï¼Œå› ä¸ºä¼šè¢«æ·‹æ¹¿ã€‚"
            },
            {
                question: "ã€Šæ«æ ‘ä¸Šçš„å–œé¹Šã€‹ä¸€æ–‡ä¸­ï¼Œå–œé¹Šé˜¿å§¨æ•™å°å–œé¹Šä»€ä¹ˆæ­Œï¼Ÿ",
                options: [
                    "æ˜¥å¤©æ­Œ",
                    "å¤å¤©æ­Œ",
                    "ç§‹å¤©æ­Œ",
                    "å†¬å¤©æ­Œ"
                ],
                correct: 2,
                hint: "å–œé¹Šé˜¿å§¨æ•™å°å–œé¹Šå”±ç§‹å¤©æ­Œã€‚"
            },
            {
                question: "ã€Šæ²™æ»©ä¸Šçš„ç«¥è¯ã€‹ä¸€æ–‡ä¸­ï¼Œå­©å­ä»¬ç”¨æ²™å­å †äº†ä»€ä¹ˆï¼Ÿ",
                options: [
                    "åŸå ¡",
                    "æˆ¿å­",
                    "å±±",
                    "æ¡¥"
                ],
                correct: 0,
                hint: "å­©å­ä»¬ç”¨æ²™å­å †äº†ä¸€åº§åŸå ¡ã€‚"
            },
            {
                question: "ã€Šå°é©¬è¿‡æ²³ã€‹ä¸€æ–‡ä¸­ï¼Œæ¾é¼ è¯´æ²³æ°´æ€ä¹ˆæ ·ï¼Ÿ",
                options: [
                    "å¾ˆæ·±",
                    "å¾ˆæµ…",
                    "å¾ˆæ€¥",
                    "å¾ˆå®½"
                ],
                correct: 0,
                hint: "æ¾é¼ è¯´æ²³æ°´å¾ˆæ·±ï¼Œä¼šæ·¹æ­»å°é©¬ã€‚"
            },
            {
                question: "ã€Šç”»æ¨æ¡ƒã€‹ä¸€æ–‡ä¸­ï¼Œè€å¸ˆè®©åŒå­¦ä»¬æ¢ä½ç½®çœ‹æ¨æ¡ƒæ˜¯ä¸ºäº†è¯´æ˜ä»€ä¹ˆï¼Ÿ",
                options: [
                    "æ¨æ¡ƒå¾ˆå¥½åƒ",
                    "è§’åº¦ä¸åŒçœ‹åˆ°çš„å½¢çŠ¶ä¸åŒ",
                    "æ¨æ¡ƒå¾ˆæ¼‚äº®",
                    "æ¨æ¡ƒå¾ˆç‰¹åˆ«"
                ],
                correct: 1,
                hint: "è€å¸ˆæƒ³è®©åŒå­¦ä»¬æ˜ç™½ä»ä¸åŒè§’åº¦çœ‹äº‹ç‰©ï¼Œå½¢çŠ¶ä¼šä¸ä¸€æ ·ã€‚"
            },
            {
                question: "ã€Šæ‰¾æ˜¥å¤©ã€‹ä¸€æ–‡ä¸­ï¼Œæ˜¥å¤©æœ€å…ˆåœ¨å“ªé‡Œå‡ºç°ï¼Ÿ",
                options: [
                    "ç”°é‡é‡Œ",
                    "å°æºªè¾¹",
                    "å…¬å›­é‡Œ",
                    "æ ‘ä¸Š"
                ],
                correct: 1,
                hint: "æ˜¥å¤©æœ€å…ˆåœ¨å°æºªè¾¹å‡ºç°ï¼Œæºªæ°´å¼€å§‹è§£å†»ã€‚"
            },
            {
                question: "ã€Šé›·é”‹å”å”ï¼Œä½ åœ¨å“ªé‡Œã€‹ä¸€æ–‡ä¸­ï¼Œé›·é”‹å”å”å¸®åŠ©è€äººæ—¶åšäº†ä»€ä¹ˆï¼Ÿ",
                options: [
                    "ç»™é’±",
                    "èƒŒè€äººè¿‡é©¬è·¯",
                    "é€é£Ÿç‰©",
                    "è®²æ•…äº‹"
                ],
                correct: 1,
                hint: "é›·é”‹å”å”ä¸»åŠ¨èƒŒè€äººè¿‡é©¬è·¯ã€‚"
            },
            {
                question: "ã€Šé‚“å°å¹³çˆ·çˆ·æ¤æ ‘ã€‹ä¸€æ–‡ä¸­ï¼Œé‚“å°å¹³çˆ·çˆ·ç§çš„æ˜¯ä»€ä¹ˆæ ‘ï¼Ÿ",
                options: [
                    "æ¾æ ‘",
                    "æ¨æ ‘",
                    "æŸ³æ ‘",
                    "æ§æ ‘"
                ],
                correct: 0,
                hint: "é‚“å°å¹³çˆ·çˆ·ç§çš„æ˜¯æ¾æ ‘ã€‚"
            },
            {
                question: "ã€Šå°èŒèšªæ‰¾å¦ˆå¦ˆã€‹ä¸€æ–‡ä¸­ï¼Œå°èŒèšªæœ€å…ˆé‡åˆ°äº†è°ï¼Ÿ",
                options: [
                    "é’è›™",
                    "é¸­å­",
                    "é±¼",
                    "ä¹Œé¾Ÿ"
                ],
                correct: 1,
                hint: "å°èŒèšªæœ€å…ˆé‡åˆ°äº†é¸­å­ã€‚"
            },
            {
                question: "ã€Šæˆ‘æ˜¯ä¸€åªå°è™«å­ã€‹ä¸€æ–‡ä¸­ï¼Œå°è™«å­æœ€å–œæ¬¢ä»€ä¹ˆå¤©æ°”ï¼Ÿ",
                options: [
                    "ä¸‹é›¨å¤©",
                    "æ™´å¤©",
                    "é˜´å¤©",
                    "ä¸‹é›ªå¤©"
                ],
                correct: 1,
                hint: "å°è™«å­æœ€å–œæ¬¢æ™´å¤©ï¼Œå¯ä»¥æ™’å¤ªé˜³ã€‚"
            },
            {
                question: "ã€Šæ«æ ‘ä¸Šçš„å–œé¹Šã€‹ä¸€æ–‡ä¸­ï¼Œå°å–œé¹Šä¸ºä»€ä¹ˆè¦å­¦å”±æ­Œï¼Ÿ",
                options: [
                    "ä¸ºäº†å¥½ç©",
                    "ä¸ºäº†å¸å¼•æœ‹å‹",
                    "ä¸ºäº†æ‰¾é£Ÿç‰©",
                    "ä¸ºäº†ç¡è§‰"
                ],
                correct: 1,
                hint: "å°å–œé¹Šå­¦å”±æ­Œæ˜¯ä¸ºäº†å¸å¼•æœ‹å‹ã€‚"
            },
            {
                question: "ã€Šæ²™æ»©ä¸Šçš„ç«¥è¯ã€‹ä¸€æ–‡ä¸­ï¼Œå­©å­ä»¬åœ¨æ²™æ»©ä¸Šç©ä»€ä¹ˆæ¸¸æˆï¼Ÿ",
                options: [
                    "å †æ²™å ¡",
                    "æŒ–å®è—",
                    "æ‰“ä»—æ¸¸æˆ",
                    "æ‰è¿·è—"
                ],
                correct: 2,
                hint: "å­©å­ä»¬åœ¨æ²™æ»©ä¸Šç©æ‰“ä»—çš„æ¸¸æˆã€‚"
            },
            {
                question: "ã€Šå°é©¬è¿‡æ²³ã€‹ä¸€æ–‡ä¸­ï¼Œå°é©¬æœ€åæ˜¯æ€ä¹ˆè¿‡æ²³çš„ï¼Ÿ",
                options: [
                    "ç›´æ¥è¶Ÿè¿‡å»",
                    "ç»•é“è€Œè¡Œ",
                    "ç­‰æ°´é€€äº†å†è¿‡",
                    "æ‰¾åˆ«çš„åŠ¨ç‰©å¸®å¿™"
                ],
                correct: 0,
                hint: "å°é©¬æœ€åå†³å®šè‡ªå·±è¯•ä¸€è¯•ï¼Œå‘ç°æ²³æ°´æ—¢ä¸åƒè€ç‰›è¯´çš„é‚£ä¹ˆæµ…ï¼Œä¹Ÿä¸åƒæ¾é¼ è¯´çš„é‚£ä¹ˆæ·±ã€‚"
            },
            {
                question: "ã€Šç”»æ¨æ¡ƒã€‹ä¸€æ–‡ä¸­ï¼Œè€å¸ˆä¸ºä»€ä¹ˆè®©åŒå­¦ä»¬ååˆ°'æˆ‘'çš„ä½ç½®ä¸Šçœ‹æ¨æ¡ƒï¼Ÿ",
                options: [
                    "å› ä¸º'æˆ‘'ç”»å¾—æœ€å¥½",
                    "å› ä¸ºè§’åº¦ä¸åŒçœ‹åˆ°çš„å½¢çŠ¶ä¸åŒ",
                    "å› ä¸º'æˆ‘'çš„ä½ç½®æœ€èˆ’æœ",
                    "å› ä¸ºè€å¸ˆæƒ³æƒ©ç½šå…¶ä»–åŒå­¦"
                ],
                correct: 1,
                hint: "è€å¸ˆæƒ³è®©åŒå­¦ä»¬æ˜ç™½ï¼Œä»ä¸åŒè§’åº¦çœ‹äº‹ç‰©ï¼Œå½¢çŠ¶ä¼šä¸ä¸€æ ·ã€‚"
            },
            {
                question: "ã€Šè¦æ˜¯ä½ åœ¨é‡å¤–è¿·äº†è·¯ã€‹ä¸€æ–‡ä¸­ï¼Œå“ªç§æ–¹æ³•ä¸èƒ½å¸®åŠ©è¾¨åˆ«æ–¹å‘ï¼Ÿ",
                options: [
                    "çœ‹å¤ªé˜³",
                    "çœ‹å¤§æ ‘",
                    "çœ‹ç§¯é›ª",
                    "çœ‹åŒ—ææ˜Ÿ"
                ],
                correct: 1,
                hint: "è¯¾æ–‡ä¸­æåˆ°äº†å¤ªé˜³ã€ç§¯é›ªã€åŒ—ææ˜Ÿå¯ä»¥å¸®åŠ©è¾¨åˆ«æ–¹å‘ï¼Œä½†æ²¡æœ‰æåˆ°å¤§æ ‘ã€‚"
            },
            {
                question: "ã€Šå°é©¬è¿‡æ²³ã€‹ä¸€æ–‡ä¸­ï¼Œå°é©¬æœ€åæ˜¯æ€ä¹ˆè¿‡æ²³çš„ï¼Ÿ",
                options: [
                    "ç›´æ¥è¶Ÿè¿‡å»",
                    "ç»•é“è€Œè¡Œ",
                    "ç­‰æ°´é€€äº†å†è¿‡",
                    "æ‰¾åˆ«çš„åŠ¨ç‰©å¸®å¿™"
                ],
                correct: 0,
                hint: "å°é©¬æœ€åå†³å®šè‡ªå·±è¯•ä¸€è¯•ï¼Œå‘ç°æ²³æ°´æ—¢ä¸åƒè€ç‰›è¯´çš„é‚£ä¹ˆæµ…ï¼Œä¹Ÿä¸åƒæ¾é¼ è¯´çš„é‚£ä¹ˆæ·±ã€‚"
            },
            {
                question: "ã€Šç”»æ¨æ¡ƒã€‹ä¸€æ–‡ä¸­ï¼Œè€å¸ˆä¸ºä»€ä¹ˆè®©åŒå­¦ä»¬ååˆ°'æˆ‘'çš„ä½ç½®ä¸Šçœ‹æ¨æ¡ƒï¼Ÿ",
                options: [
                    "å› ä¸º'æˆ‘'ç”»å¾—æœ€å¥½",
                    "å› ä¸ºè§’åº¦ä¸åŒçœ‹åˆ°çš„å½¢çŠ¶ä¸åŒ",
                    "å› ä¸º'æˆ‘'çš„ä½ç½®æœ€èˆ’æœ",
                    "å› ä¸ºè€å¸ˆæƒ³æƒ©ç½šå…¶ä»–åŒå­¦"
                ],
                correct: 1,
                hint: "è€å¸ˆæƒ³è®©åŒå­¦ä»¬æ˜ç™½ï¼Œä»ä¸åŒè§’åº¦çœ‹äº‹ç‰©ï¼Œå½¢çŠ¶ä¼šä¸ä¸€æ ·ã€‚"
            },
            {
                question: "ã€Šæ‰¾æ˜¥å¤©ã€‹ä¸€æ–‡ä¸­ï¼Œå­©å­ä»¬åœ¨ç”°é‡é‡Œå‘ç°äº†ä»€ä¹ˆæ˜¥å¤©çš„è¿¹è±¡ï¼Ÿ",
                options: [
                    " snow",
                    "æ–°é•¿å‡ºçš„è‰",
                    "è½å¶",
                    "æ¯è‰"
                ],
                correct: 1,
                hint: "å­©å­ä»¬åœ¨ç”°é‡é‡Œå‘ç°äº†æ–°é•¿å‡ºçš„è‰ï¼Œè¿™æ˜¯æ˜¥å¤©çš„è¿¹è±¡ã€‚"
            },
            {
                question: "ã€Šé›·é”‹å”å”ï¼Œä½ åœ¨å“ªé‡Œã€‹ä¸€æ–‡ä¸­ï¼Œé›·é”‹å”å”å¸®åŠ©è¿·è·¯çš„å­©å­æ—¶åšäº†ä»€ä¹ˆï¼Ÿ",
                options: [
                    "ç»™é’±",
                    "é€å›å®¶",
                    "é€é£Ÿç‰©",
                    "è®²æ•…äº‹"
                ],
                correct: 1,
                hint: "é›·é”‹å”å”ä¸»åŠ¨é€è¿·è·¯çš„å­©å­å›å®¶ã€‚"
            },
            {
                question: "ã€Šé‚“å°å¹³çˆ·çˆ·æ¤æ ‘ã€‹ä¸€æ–‡ä¸­ï¼Œé‚“å°å¹³çˆ·çˆ·ä¸ºä»€ä¹ˆè¦æ¤æ ‘ï¼Ÿ",
                options: [
                    "ä¸ºäº†å¥½çœ‹",
                    "ä¸ºäº†ç¯ä¿",
                    "ä¸ºäº†çºªå¿µ",
                    "ä¸ºäº†é®é˜³"
                ],
                correct: 1,
                hint: "é‚“å°å¹³çˆ·çˆ·æ¤æ ‘æ˜¯ä¸ºäº†ä¿æŠ¤ç¯å¢ƒã€‚"
            },
            {
                question: "ã€Šå°èŒèšªæ‰¾å¦ˆå¦ˆã€‹ä¸€æ–‡ä¸­ï¼Œå°èŒèšªæœ€åå˜æˆäº†ä»€ä¹ˆï¼Ÿ",
                options: [
                    "é’è›™",
                    "é±¼",
                    "ä¹Œé¾Ÿ",
                    "é¸­å­"
                ],
                correct: 0,
                hint: "å°èŒèšªæœ€åå˜æˆäº†é’è›™ã€‚"
            },
            {
                question: "ã€Šæˆ‘æ˜¯ä¸€åªå°è™«å­ã€‹ä¸€æ–‡ä¸­ï¼Œå°è™«å­æœ€å®³æ€•ä»€ä¹ˆï¼Ÿ",
                options: [
                    "ä¸‹é›¨",
                    "åˆ®é£",
                    "æ‰“é›·",
                    "ä¸‹é›ª"
                ],
                correct: 0,
                hint: "å°è™«å­æœ€å®³æ€•ä¸‹é›¨ï¼Œå› ä¸ºä¼šè¢«æ·‹æ¹¿ã€‚"
            },
            {
                question: "ã€Šæ«æ ‘ä¸Šçš„å–œé¹Šã€‹ä¸€æ–‡ä¸­ï¼Œå–œé¹Šé˜¿å§¨æ•™å°å–œé¹Šä»€ä¹ˆæ­Œï¼Ÿ",
                options: [
                    "æ˜¥å¤©æ­Œ",
                    "å¤å¤©æ­Œ",
                    "ç§‹å¤©æ­Œ",
                    "å†¬å¤©æ­Œ"
                ],
                correct: 2,
                hint: "å–œé¹Šé˜¿å§¨æ•™å°å–œé¹Šå”±ç§‹å¤©æ­Œã€‚"
            },
            {
                question: "ã€Šæ²™æ»©ä¸Šçš„ç«¥è¯ã€‹ä¸€æ–‡ä¸­ï¼Œå­©å­ä»¬ç”¨æ²™å­å †äº†ä»€ä¹ˆï¼Ÿ",
                options: [
                    "åŸå ¡",
                    "æˆ¿å­",
                    "å±±",
                    "æ¡¥"
                ],
                correct: 0,
                hint: "å­©å­ä»¬ç”¨æ²™å­å †äº†ä¸€åº§åŸå ¡ã€‚"
            },
            {
                question: "ã€Šå°é©¬è¿‡æ²³ã€‹ä¸€æ–‡ä¸­ï¼Œæ¾é¼ è¯´æ²³æ°´æ€ä¹ˆæ ·ï¼Ÿ",
                options: [
                    "å¾ˆæ·±",
                    "å¾ˆæµ…",
                    "å¾ˆæ€¥",
                    "å¾ˆå®½"
                ],
                correct: 1,
                hint: "æ¾é¼ è¯´æ²³æ°´å¾ˆæµ…ï¼Œå¯ä»¥è½»æ¾è¿‡å»ã€‚"
            }
        ];
        
        // æ¸¸æˆçŠ¶æ€
        let currentQuestion = 0;
        let score = 0;
        let coins = 100;
        let answered = false;
        let level = 1;
        let xp = 0;
        let xpToNextLevel = 100;
        let streak = 0;
        let timerInterval;
        let timeLeft = 30;
        let doubleXpActive = false;
        let freezeTimerActive = false;
        let doubleXpCount = 1;
        let freezeTimerCount = 1;
        let removeWrongCount = 1;
        
        // å¤´åƒè§£é”çŠ¶æ€
        const avatars = [
            { id: 1, src: "https://img.icons8.com/color/96/000000/cute-monster.png", unlocked: true },
            { id: 2, src: "https://img.icons8.com/color/96/000000/dragon.png", unlocked: false },
            { id: 3, src: "https://img.icons8.com/color/96/000000/unicorn.png", unlocked: false },
            { id: 4, src: "https://img.icons8.com/color/96/000000/robot.png", unlocked: false }
        ];
        
        // DOMå…ƒç´ 
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const coinsElement = document.getElementById('coins');
        const progressFill = document.getElementById('progress-fill');
        const hintBtn = document.getElementById('hint-btn');
        const skipBtn = document.getElementById('skip-btn');
        const hintModal = document.getElementById('hint-modal');
        const hintText = document.getElementById('hint-text');
        const closeHint = document.getElementById('close-hint');
        const resultModal = document.getElementById('result-modal');
        const resultIcon = document.getElementById('result-icon');
        const resultTitle = document.getElementById('result-title');
        const resultText = document.getElementById('result-text');
        const coinsEarned = document.getElementById('coins-earned');
        const xpEarned = document.getElementById('xp-earned');
        const nextQuestionBtn = document.getElementById('next-question');
        const celebrationContainer = document.getElementById('celebration-container');
        const levelElement = document.getElementById('level');
        const xpElement = document.getElementById('xp');
        const questionNumber = document.getElementById('question-number');
        const timerElement = document.getElementById('timer');
        const streakContainer = document.getElementById('streak-container');
        const streakCount = document.getElementById('streak-count');
        const avatarElement = document.getElementById('avatar');
        const levelUpModal = document.getElementById('level-up');
        const newLevelText = document.getElementById('new-level');
        const closeLevelUp = document.getElementById('close-level-up');
        const dailyRewardModal = document.getElementById('daily-reward');
        const claimRewardBtn = document.getElementById('claim-reward');
        const doubleXpBtn = document.getElementById('double-xp');
        const freezeTimerBtn = document.getElementById('freeze-timer');
        const removeWrongBtn = document.getElementById('remove-wrong');
        const doubleXpCountElement = document.getElementById('double-xp-count');
        const freezeTimerCountElement = document.getElementById('freeze-timer-count');
        const removeWrongCountElement = document.getElementById('remove-wrong-count');
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // æ£€æŸ¥æ˜¯å¦æœ‰æ¯æ—¥å¥–åŠ±
            checkDailyReward();
            
            loadQuestion();
            updateCoins();
            updateXp();
            updateStreak();
            updatePowerups();
            
            // äº‹ä»¶ç›‘å¬
            hintBtn.addEventListener('click', showHint);
            skipBtn.addEventListener('click', skipQuestion);
            closeHint.addEventListener('click', () => hintModal.classList.add('hidden'));
            nextQuestionBtn.addEventListener('click', nextQuestion);
            closeLevelUp.addEventListener('click', () => levelUpModal.classList.add('hidden'));
            claimRewardBtn.addEventListener('click', claimDailyReward);
            doubleXpBtn.addEventListener('click', activateDoubleXp);
            freezeTimerBtn.addEventListener('click', activateFreezeTimer);
            removeWrongBtn.addEventListener('click', activateRemoveWrong);
            
            // ç‚¹å‡»å¤´åƒå¯ä»¥åˆ‡æ¢
            avatarElement.addEventListener('click', showAvatarSelection);
            
            // å¼€å§‹è®¡æ—¶å™¨
            startTimer();
        }
        
        // æ£€æŸ¥æ¯æ—¥å¥–åŠ±
        function checkDailyReward() {
            const lastPlayed = localStorage.getItem('lastPlayed');
            const today = new Date().toDateString();
            
            if (!lastPlayed || lastPlayed !== today) {
                // æ˜¾ç¤ºæ¯æ—¥å¥–åŠ±
                setTimeout(() => {
                    dailyRewardModal.classList.remove('hidden');
                }, 1000);
                
                // æ›´æ–°è¿ç»­ç™»å½•å¤©æ•°
                const streakDays = parseInt(localStorage.getItem('streakDays')) || 0;
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                
                if (lastPlayed === yesterday.toDateString()) {
                    localStorage.setItem('streakDays', streakDays + 1);
                } else if (!lastPlayed) {
                    localStorage.setItem('streakDays', 1);
                } else {
                    localStorage.setItem('streakDays', 1);
                }
                
                localStorage.setItem('lastPlayed', today);
            }
        }
        
        // é¢†å–æ¯æ—¥å¥–åŠ±
        function claimDailyReward() {
            const streakDays = parseInt(localStorage.getItem('streakDays')) || 1;
            let reward = 20;
            
            if (streakDays >= 7) reward = 200;
            else if (streakDays >= 5) reward = 100;
            else if (streakDays >= 3) reward = 50;
            
            coins += reward;
            updateCoins();
            dailyRewardModal.classList.add('hidden');
            
            // æ˜¾ç¤ºå¥–åŠ±è·å¾—æç¤º
            showToast(`è·å¾—æ¯æ—¥å¥–åŠ±: ${reward}é‡‘å¸`);
        }
        
        // æ˜¾ç¤ºToastæç¤º
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg z-50 animate-bounce';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 2000);
        }
        
        // åŠ è½½é—®é¢˜
        function loadQuestion() {
            answered = false;
            timeLeft = 30;
            updateTimerDisplay();
            
            const question = questions[currentQuestion];
            questionElement.textContent = question.question;
            questionNumber.textContent = `é—®é¢˜ ${currentQuestion + 1}/${questions.length}`;
            
            optionsElement.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option bg-white p-4 rounded-lg text-center font-medium shadow-md hover:bg-gray-50';
                optionElement.textContent = option;
                optionElement.dataset.index = index;
                optionElement.addEventListener('click', selectOption);
                optionsElement.appendChild(optionElement);
            });
            
            // æ›´æ–°è¿›åº¦æ¡
            progressFill.style.width = `${(currentQuestion / questions.length) * 100}%`;
            
            // é‡ç½®è®¡æ—¶å™¨
            clearInterval(timerInterval);
            startTimer();
        }
        
        // å¼€å§‹è®¡æ—¶å™¨
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 30;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                if (!freezeTimerActive) {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        timeUp();
                    }
                }
            }, 1000);
        }
        
        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        function updateTimerDisplay() {
            let displayTime = timeLeft;
            let emoji = "â±ï¸";
            
            if (timeLeft <= 10) {
                emoji = "ğŸ”¥";
                timerElement.className = "text-sm font-bold text-red-500";
            } else if (timeLeft <= 20) {
                emoji = "âŒ›";
                timerElement.className = "text-sm font-bold text-yellow-500";
            } else {
                timerElement.className = "text-sm font-bold";
            }
            
            timerElement.textContent = `${emoji} ${displayTime}ç§’`;
        }
        
        // æ—¶é—´åˆ°
        function timeUp() {
            if (answered) return;
            answered = true;
            
            const correctIndex = questions[currentQuestion].correct;
            const options = document.querySelectorAll('.option');
            
            // æ ‡è®°æ­£ç¡®çš„é€‰é¡¹
            options.forEach((option, index) => {
                if (index === correctIndex) {
                    option.classList.add('correct');
                }
                
                // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
                option.style.pointerEvents = 'none';
            });
            
            // æ˜¾ç¤ºç»“æœ
            resultIcon.className = 'fas fa-hourglass-end text-5xl mb-4 text-red-500';
            resultTitle.textContent = 'æ—¶é—´åˆ°!';
            resultText.textContent = `æ­£ç¡®ç­”æ¡ˆ: ${questions[currentQuestion].options[correctIndex]}`;
            coinsEarned.textContent = '0';
            xpEarned.textContent = '5';
            resultModal.classList.remove('hidden');
            
            // å‡å°‘è¿ç»­ç™»å½•å¤©æ•°
            streak = 0;
            updateStreak();
            
            // ç»™äºˆå°‘é‡ç»éªŒ
            addXp(5);
        }
        
        // é€‰æ‹©é€‰é¡¹
        function selectOption(e) {
            if (answered) return;
            answered = true;
            clearInterval(timerInterval);
            
            const selectedIndex = parseInt(e.target.dataset.index);
            const correctIndex = questions[currentQuestion].correct;
            const options = document.querySelectorAll('.option');
            
            // æ ‡è®°æ­£ç¡®å’Œé”™è¯¯çš„é€‰é¡¹
            options.forEach((option, index) => {
                if (index === correctIndex) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== correctIndex) {
                    option.classList.add('wrong');
                }
                
                // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
                option.style.pointerEvents = 'none';
            });
            
            // æ£€æŸ¥ç­”æ¡ˆ
            if (selectedIndex === correctIndex) {
                score++;
                
                // è®¡ç®—å¥–åŠ±
                let coinsReward = 20 + Math.floor(timeLeft / 5);
                let xpReward = 10 + Math.floor(timeLeft / 3);
                
                // åŒå€ç»éªŒ
                if (doubleXpActive) {
                    xpReward *= 2;
                    doubleXpActive = false;
                }
                
                coins += coinsReward;
                addXp(xpReward);
                
                // æ›´æ–°è¿ç»­ç™»å½•å¤©æ•°
                streak++;
                updateStreak();
                
                // æ˜¾ç¤ºç»“æœ
                coinsEarned.textContent = coinsReward;
                xpEarned.textContent = xpReward;
                showResult(true);
            } else {
                coins = Math.max(0, coins - 10);
                addXp(5);
                
                // å‡å°‘è¿ç»­ç™»å½•å¤©æ•°
                streak = 0;
                updateStreak();
                
                // æ˜¾ç¤ºç»“æœ
                coinsEarned.textContent = '-10';
                xpEarned.textContent = '5';
                showResult(false);
            }
            
            updateCoins();
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult(isCorrect) {
            if (isCorrect) {
                resultIcon.className = 'fas fa-check-circle text-5xl mb-4 text-green-500';
                resultTitle.textContent = 'å›ç­”æ­£ç¡®!';
                resultText.textContent = 'ä½ å¤ªæ£’äº†!';
                
                // åº†ç¥åŠ¨ç”»
                if (score % 3 === 0) {
                    showCelebration();
                }
            } else {
                resultIcon.className = 'fas fa-times-circle text-5xl mb-4 text-red-500';
                resultTitle.textContent = 'å›ç­”é”™è¯¯!';
                resultText.textContent = `æ­£ç¡®ç­”æ¡ˆ: ${questions[currentQuestion].options[questions[currentQuestion].correct]}`;
            }
            
            resultModal.classList.remove('hidden');
        }
        
        // æ˜¾ç¤ºåº†ç¥åŠ¨ç”»
        function showCelebration() {
            celebrationContainer.classList.remove('hidden');
            celebrationContainer.innerHTML = '';
            
            // åˆ›å»º50ä¸ªå½©è‰²çº¸å±‘
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = 3 + Math.random() * 3 + 's';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                celebrationContainer.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebrationContainer.classList.add('hidden');
            }, 3000);
        }
        
        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            resultModal.classList.add('hidden');
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                // æ¸¸æˆç»“æŸ
                questionElement.textContent = `æ¸¸æˆç»“æŸ! ä½ çš„å¾—åˆ†æ˜¯ ${score}/${questions.length}`;
                optionsElement.innerHTML = '';
                hintBtn.style.display = 'none';
                skipBtn.style.display = 'none';
                clearInterval(timerInterval);
                
                // æ˜¾ç¤ºæœ€ç»ˆå¾—åˆ†å’Œå¥–åŠ±
                const finalCoins = score * 20;
                const finalXp = score * 15;
                coins += finalCoins;
                addXp(finalXp);
                
                // æ˜¾ç¤ºåº†ç¥åŠ¨ç”»
                showCelebration();
                
                // æ·»åŠ é‡æ–°å¼€å§‹æŒ‰é’®
                const restartBtn = document.createElement('button');
                restartBtn.className = 'bg-purple-600 text-white px-6 py-2 rounded-full mt-4';
                restartBtn.textContent = 'å†æ¥ä¸€æ¬¡';
                restartBtn.addEventListener('click', restartGame);
                optionsElement.appendChild(restartBtn);
                
                // æ ¹æ®å¾—åˆ†ç»™äºˆé“å…·å¥–åŠ±
                if (score >= 8) {
                    doubleXpCount += 2;
                    freezeTimerCount += 1;
                    removeWrongCount += 1;
                    updatePowerups();
                    showToast("å®Œç¾è¡¨ç°! è·å¾—é¢å¤–é“å…·å¥–åŠ±!");
                } else if (score >= 5) {
                    doubleXpCount += 1;
                    updatePowerups();
                    showToast("ä¸é”™çš„è¡¨ç°! è·å¾—é¢å¤–é“å…·å¥–åŠ±!");
                }
            }
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            currentQuestion = 0;
            score = 0;
            hintBtn.style.display = 'block';
            skipBtn.style.display = 'block';
            loadQuestion();
        }
        
        // æ˜¾ç¤ºæç¤º
        function showHint() {
            if (coins < 20) {
                showToast('é‡‘å¸ä¸è¶³!');
                return;
            }
            
            coins -= 20;
            updateCoins();
            hintText.textContent = questions[currentQuestion].hint;
            hintText.classList.remove('hidden');
        }
        
        // è·³è¿‡é—®é¢˜
        function skipQuestion() {
            if (coins < 30) {
                showToast('é‡‘å¸ä¸è¶³!');
                return;
            }
            
            coins -= 30;
            updateCoins();
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                nextQuestion();
            }
        }
        
        // æ›´æ–°é‡‘å¸æ˜¾ç¤º
        function updateCoins() {
            coinsElement.textContent = coins;
        }
        
        // æ›´æ–°ç»éªŒå€¼
        function updateXp() {
            levelElement.textContent = `ç­‰çº§: ${level}`;
            xpElement.textContent = `ç»éªŒ: ${xp}/${xpToNextLevel}`;
            
            // æ›´æ–°ç»éªŒæ¡
            const xpPercentage = (xp / xpToNextLevel) * 100;
            progressFill.style.width = `${xpPercentage}%`;
        }
        
        // å¢åŠ ç»éªŒå€¼
        function addXp(amount) {
            xp += amount;
            
            // æ£€æŸ¥æ˜¯å¦å‡çº§
            if (xp >= xpToNextLevel) {
                level++;
                xp -= xpToNextLevel;
                xpToNextLevel = Math.floor(xpToNextLevel * 1.5);
                
                // æ˜¾ç¤ºå‡çº§æç¤º
                newLevelText.textContent = `ä½ ç°åœ¨æ˜¯ç­‰çº§ ${level}!`;
                levelUpModal.classList.remove('hidden');
                
                // è§£é”æ–°å¤´åƒ
                if (level >= 3 && !avatars[1].unlocked) {
                    avatars[1].unlocked = true;
                    showToast("è§£é”æ–°å¤´åƒ: å°é¾™!");
                } else if (level >= 5 && !avatars[2].unlocked) {
                    avatars[2].unlocked = true;
                    showToast("è§£é”æ–°å¤´åƒ: ç‹¬è§’å…½!");
                } else if (level >= 7 && !avatars[3].unlocked) {
                    avatars[3].unlocked = true;
                    showToast("è§£é”æ–°å¤´åƒ: æœºå™¨äºº!");
                }
                
                // å‡çº§å¥–åŠ±
                coins += level * 50;
                updateCoins();
            }
            
            updateXp();
        }
        
        // æ›´æ–°è¿ç»­ç™»å½•å¤©æ•°æ˜¾ç¤º
        function updateStreak() {
            if (streak > 0) {
                streakContainer.style.display = 'flex';
                streakCount.textContent = streak;
            } else {
                streakContainer.style.display = 'none';
            }
        }
        
        // æ˜¾ç¤ºå¤´åƒé€‰æ‹©
        function showAvatarSelection() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            const content = document.createElement('div');
            content.className = 'bg-white p-6 rounded-lg max-w-sm w-full mx-4';
            
            const title = document.createElement('h3');
            title.className = 'text-xl font-bold mb-4 text-purple-600';
            title.textContent = 'é€‰æ‹©å¤´åƒ';
            content.appendChild(title);
            
            const avatarContainer = document.createElement('div');
            avatarContainer.className = 'flex justify-around flex-wrap';
            
            avatars.forEach(avatar => {
                const avatarDiv = document.createElement('div');
                avatarDiv.className = 'text-center mb-4';
                
                const img = document.createElement('img');
                img.src = avatar.src;
                img.className = 'avatar mb-2 cursor-pointer';
                if (!avatar.unlocked) {
                    img.style.filter = 'grayscale(100%)';
                    img.style.opacity = '0.5';
                }
                
                img.addEventListener('click', () => {
                    if (avatar.unlocked) {
                        avatarElement.src = avatar.src;
                        modal.remove();
                        showToast(`å·²åˆ‡æ¢åˆ°å¤´åƒ ${avatar.id}`);
                    } else {
                        showToast(`ç­‰çº§ ${avatar.id * 2 + 1} è§£é”`);
                    }
                });
                
                avatarDiv.appendChild(img);
                
                if (!avatar.unlocked) {
                    const lock = document.createElement('div');
                    lock.className = 'text-sm text-gray-500';
                    lock.textContent = 'ç­‰çº§ ' + (avatar.id * 2 + 1);
                    avatarDiv.appendChild(lock);
                }
                
                avatarContainer.appendChild(avatarDiv);
            });
            
            content.appendChild(avatarContainer);
            
            const closeBtn = document.createElement('button');
            closeBtn.className = 'bg-gray-200 text-gray-800 px-4 py-2 rounded mt-4';
            closeBtn.textContent = 'å…³é—­';
            closeBtn.addEventListener('click', () => modal.remove());
            content.appendChild(closeBtn);
            
            modal.appendChild(content);
            document.body.appendChild(modal);
        }
        
        // æ›´æ–°é“å…·æ•°é‡æ˜¾ç¤º
        function updatePowerups() {
            doubleXpCountElement.textContent = doubleXpCount;
            freezeTimerCountElement.textContent = freezeTimerCount;
            removeWrongCountElement.textContent = removeWrongCount;
        }
        
        // æ¿€æ´»åŒå€ç»éªŒ
        function activateDoubleXp() {
            if (doubleXpCount <= 0) {
                showToast('é“å…·ä¸è¶³!');
                return;
            }
            
            doubleXpCount--;
            doubleXpActive = true;
            updatePowerups();
            
            showToast('åŒå€ç»éªŒå·²æ¿€æ´»!');
            
            // 30ç§’åå¤±æ•ˆ
            setTimeout(() => {
                if (doubleXpActive) {
                    doubleXpActive = false;
                    showToast('åŒå€ç»éªŒå·²ç»“æŸ');
                }
            }, 30000);
        }
        
        // æ¿€æ´»å†»ç»“æ—¶é—´
        function activateFreezeTimer() {
            if (freezeTimerCount <= 0) {
                showToast('é“å…·ä¸è¶³!');
                return;
            }
            
            freezeTimerCount--;
            freezeTimerActive = true;
            updatePowerups();
            
            showToast('æ—¶é—´å†»ç»“10ç§’!');
            
            // 10ç§’åè§£å†»
            setTimeout(() => {
                freezeTimerActive = false;
                showToast('æ—¶é—´æ¢å¤æµåŠ¨');
            }, 10000);
        }
        
        // æ¿€æ´»ç§»é™¤é”™è¯¯ç­”æ¡ˆ
        function activateRemoveWrong() {
            if (removeWrongCount <= 0) {
                showToast('é“å…·ä¸è¶³!');
                return;
            }
            
            if (answered) {
                showToast('é—®é¢˜å·²å›ç­”ï¼Œæ— æ³•ä½¿ç”¨');
                return;
            }
            
            removeWrongCount--;
            updatePowerups();
            
            const correctIndex = questions[currentQuestion].correct;
            const options = document.querySelectorAll('.option');
            let removed = 0;
            
            options.forEach((option, index) => {
                if (index !== correctIndex && removed < 2) {
                    if (!option.classList.contains('wrong')) {
                        option.style.visibility = 'hidden';
                        option.style.pointerEvents = 'none';
                        removed++;
                    }
                }
            });
            
            showToast('å·²ç§»é™¤2ä¸ªé”™è¯¯ç­”æ¡ˆ!');
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        window.onload = initGame;
    </script>
</body>
</html>